#!/bin/bash
# Time-stamp: "2024-12-23 11:56:34 (ywatanabe)"
# File: /home/ywatanabe/.emacs.d/lisp/Ninja/config/env/00_all.env

# Define constants
export NINJA_ROOT_APPTAINER="/opt/Ninja"
THIS_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
export NINJA_ROOT_HOST=${NINJA_ROOT_HOST:-$THIS_DIR/../..}

# Set NINJA_ROOT based on environment
if [ -n "$APPTAINER_CONTAINER" ]; then
    export NINJA_ROOT="$NINJA_ROOT_APPTAINER"
else
    export NINJA_ROOT="$NINJA_ROOT_HOST"
fi

# Source env files only if not already loaded
if [ -z "$ALL_ENV_LOADED" ]; then
    ALL_ENV_LOADED=1
    ENV_DIR="$NINJA_ROOT/config/env"
    for env_file in "${ENV_DIR}"/[0-9][0-9]_*.env; do
        if [ "$env_file" != "${ENV_DIR}/00_all.env" ] && [ -f "$env_file" ]; then
            source "$env_file"
        fi
    done
fi

# EOF
